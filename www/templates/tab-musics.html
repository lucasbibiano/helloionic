<ion-view view-title="Músicas | Selecionadas: {{selected().length}}">
  <ion-content>
    <ion-list>
      <div class="bar bar-header item-input-inset">
        <label class="item-input-wrapper">
          <i class="icon ion-ios7-search placeholder-icon"></i>
          <input ng-model="query" type="search" placeholder="Search">
        </label>
        <button class="button button-clear button-stable icon ion-close" ng-click="query = null">
        </button>
      </div>

      <div ng-repeat="(group, musics) in groupedMusics">
        
        <ion-item class="item-divider" ng-show="(musics | filter:query).length > 0">{{group}}</ion-item>

        <ion-item class="item-remove-animate item-icon-right music" ng-class="{'active': isSelected(music)}" ng-repeat="music in musics | filter:query" type="item-text-wrap" on-hold="showOpts(music)">
          <h2>{{music.name}}</h2>
          <p>Artista: {{music.artist}}</p>
          <p>Tocada pela última vez em: {{music.lastPlayed | date:'dd/MM/yyyy'}}</p>

          <i ng-if="isSelected(music)" class="icon ion-checkmark"></i>

          <ion-scroll direction="x" class="wide-as-needed tag-list">
            <a class="button button-small button-stable tag" ng-repeat="tag in music.tags track by $index">
              {{tag}}
            </a>
          </ion-scroll>

        </ion-item>

      </div>

    </ion-list>
  </ion-content>
</ion-view>
